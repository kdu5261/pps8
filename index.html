<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>P&P Partners - 상담 신청</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link rel="stylesheet" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.css" />
    <style>
        body {
            font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, system-ui, Roboto, sans-serif;
            background-color: #F9FAFB;
            color: #191F28;
            -webkit-tap-highlight-color: transparent;
        }
        .glass {
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
        }
        .animate-fade {
            animation: fadeIn 0.4s ease-out forwards;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .input-field {
            width: 100%;
            background-color: #F2F4F6;
            border: none;
            border-radius: 16px;
            padding: 16px;
            font-size: 16px;
            font-weight: 500;
            transition: all 0.2s;
        }
        .input-field:focus {
            outline: none;
            background-color: #FFFFFF;
            box-shadow: 0 0 0 2px #0050FF;
        }
        .btn-submit {
            background-color: #0050FF;
            color: white;
            width: 100%;
            padding: 18px;
            border-radius: 20px;
            font-size: 17px;
            font-weight: 700;
            transition: all 0.2s;
            box-shadow: 0 8px 16px rgba(0, 80, 255, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .btn-submit:disabled {
            background-color: #ADB5BD;
            box-shadow: none;
            cursor: not-allowed;
        }
        .btn-submit:not(:disabled):active {
            transform: scale(0.96);
            background-color: #0045DB;
        }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        
        #success-modal {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .spinner {
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top: 3px solid #fff;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
            margin-right: 8px;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* 로고 이미지 스타일 */
        .logo-img {
            height: 28px;
            width: auto;
            object-fit: contain;
            margin-right: 8px;
        }
    </style>
</head>
<body class="overflow-x-hidden no-scrollbar">

    <!-- Header -->
    <header class="fixed top-0 left-0 right-0 h-14 glass border-b border-gray-100 z-[100] flex items-center justify-between px-5">
        <div class="flex items-center">
            <!-- 회사 로고 이미지 삽입 -->
            <img src="https://i.imgur.com/cvdITFb.png" alt="P&P Partners Logo" class="logo-img">
            <div class="text-[18px] font-black tracking-tighter text-[#191F28]">P&P Partners</div>
        </div>
        <div class="flex bg-[#F2F4F6] p-0.5 rounded-full text-[12px] font-bold">
            <!-- 초기 버튼 상태를 러시아어 활성화 상태로 설정 -->
            <button id="lang-ko" onclick="switchLang('ko')" class="px-3 py-1 rounded-full transition-all text-[#6B7684]">한국어</button>
            <button id="lang-ru" onclick="switchLang('ru')" class="px-3 py-1 rounded-full transition-all bg-white shadow-sm text-[#0050FF]">русский</button>
        </div>
    </header>

    <!-- Main Content -->
    <main id="app-content" class="pt-20 pb-10 px-5 max-w-md mx-auto min-h-screen">
        <!-- Renders via JS -->
    </main>

    <!-- Success Modal -->
    <div id="success-modal">
        <div class="bg-white rounded-[30px] p-8 w-full max-w-xs text-center animate-fade">
            <div class="w-16 h-16 bg-blue-50 text-blue-600 rounded-full flex items-center justify-center mx-auto mb-4">
                <i data-lucide="check-circle-2" class="w-10 h-10"></i>
            </div>
            <h3 class="text-xl font-bold mb-2" id="modal-title">신청 완료</h3>
            <p class="text-gray-500 text-sm mb-6" id="modal-desc">확인 후 빠르게 연락드리겠습니다.</p>
            <button onclick="closeModal()" class="w-full bg-[#F2F4F6] py-3 rounded-xl font-bold text-[#4E5968]" id="modal-close-btn">확인</button>
        </div>
    </div>

    <script>
        const scriptURL = 'https://script.google.com/macros/s/AKfycbxWmJ9F9tsqXa-iLTa65otnre681mIDwVohXGIypci8dRaWAcEoy8rKLJSdusv2ZfVzow/exec';
        
        // 초기 언어 설정을 러시아어로 변경
        let currentLang = 'ru';

        const i18n = {
            ko: {
                landing: {
                    title: "P&P Partners<br>간편 상담 신청",
                    desc: "이름과 연락처를 남겨주시면<br>전문 상담사가 친절히 안내해 드립니다.",
                    nameLabel: "이름",
                    namePlaceholder: "이름을 입력해주세요",
                    phoneLabel: "휴대폰 번호",
                    phonePlaceholder: "숫자만 입력해주세요",
                    agree: "개인정보 수집 및 이용에 동의합니다",
                    submit: "상담 신청하기",
                    submitting: "신청 중...",
                    modalTitle: "신청이 완료되었습니다",
                    modalDesc: "담당자가 확인 후 순차적으로 연락드릴 예정입니다. 감사합니다.",
                    modalClose: "확인",
                    error: "전송에 실패했습니다. 네트워크 상태를 확인하거나 잠시 후 다시 시도해 주세요."
                },
                footer: { 
                    company: "P&P Partners Co.,LTD", 
                    brn: "Business Registration Number: 840-88-02840", 
                    addr: "주소: 인천 남동구 남동서로236번길 20, 2층", 
                    email: "email: kdu5261@gmail.com", 
                    ceo: "대표: 김민정", 
                    rights: "© P&P PARTNERS. All rights reserved.<br>무단 사용 및 배포 금지." 
                }
            },
            ru: {
                landing: {
                    title: "Заявка на консультацию<br>P&P Partners",
                    desc: "Оставьте ваше имя и контактный номер,<br>и наш специалист свяжется с вами.",
                    nameLabel: "Имя",
                    namePlaceholder: "Введите ваше имя",
                    phoneLabel: "Номер телефона",
                    phonePlaceholder: "Введите только цифры",
                    agree: "Я согласен на обработку личных данных",
                    submit: "Оставить заявку",
                    submitting: "Отправка...",
                    modalTitle: "Заявка принята",
                    modalDesc: "Наш специалист свяжется с вами в ближайшее время. Благодарим вас.",
                    modalClose: "Закрыть",
                    error: "Ошибка отправки. Попробуйте еще раз."
                },
                footer: { 
                    company: "P&P Partners Co.,LTD", 
                    brn: "Бизнес-номер: 840-88-02840", 
                    addr: "Инчхон, Намдон-구, Намдонсео-ро 236, 2 эт.", 
                    email: "email: kdu5261@gmail.com", 
                    ceo: "Директор: Ким 민정", 
                    rights: "© P&P PARTNERS. All rights reserved.<br>Копирование запрещено." 
                }
            }
        };

        function switchLang(lang) {
            currentLang = lang;
            const koBtn = document.getElementById('lang-ko');
            const ruBtn = document.getElementById('lang-ru');
            if (lang === 'ko') {
                koBtn.classList.add('bg-white', 'shadow-sm', 'text-[#0050FF]');
                koBtn.classList.remove('text-[#6B7684]');
                ruBtn.classList.remove('bg-white', 'shadow-sm', 'text-[#0050FF]');
                ruBtn.classList.add('text-[#6B7684]');
            } else {
                ruBtn.classList.add('bg-white', 'shadow-sm', 'text-[#0050FF]');
                ruBtn.classList.remove('text-[#6B7684]');
                koBtn.classList.remove('bg-white', 'shadow-sm', 'text-[#0050FF]');
                koBtn.classList.add('text-[#6B7684]');
            }
            render();
        }

        async function handleSubmit(e) {
            e.preventDefault();
            const form = e.target;
            const btn = form.querySelector('button[type="submit"]');
            const t = i18n[currentLang].landing;

            btn.disabled = true;
            btn.innerHTML = `<div class="spinner"></div> ${t.submitting}`;

            const params = new URLSearchParams();
            params.append('name', form.name.value);
            params.append('phone', form.phone.value);
            params.append('date', new Date().toLocaleString('ko-KR'));
            params.append('lang', currentLang);
            params.append('site', 'pps8');

            try {
                await fetch(scriptURL, { 
                    method: 'POST', 
                    mode: 'no-cors', 
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded'
                    },
                    body: params.toString()
                });

                showSuccessModal(t);
                form.reset();

            } catch (error) {
                console.error('Submit Error:', error);
                alert(t.error);
            } finally {
                btn.disabled = false;
                btn.innerHTML = t.submit;
            }
        }

        function showSuccessModal(t) {
            document.getElementById('modal-title').innerText = t.modalTitle;
            document.getElementById('modal-desc').innerText = t.modalDesc;
            document.getElementById('modal-close-btn').innerText = t.modalClose;
            document.getElementById('success-modal').style.display = 'flex';
        }

        function closeModal() {
            document.getElementById('success-modal').style.display = 'none';
        }

        function render() {
            const container = document.getElementById('app-content');
            const t = i18n[currentLang];
            const L = t.landing;

            container.innerHTML = `
                <div class="animate-fade">
                    <div class="rounded-[30px] overflow-hidden mb-8 shadow-sm text-center">
                        <img src="https://iili.io/fiDO3CP.png" class="w-full mx-auto" alt="Hero">
                    </div>

                    <div class="mb-10 text-center px-2">
                        <h1 class="text-[28px] font-bold leading-tight mb-4 text-[#191F28]">${L.title}</h1>
                        <p class="text-[#4E5968] text-[16px] leading-relaxed">${L.desc}</p>
                    </div>

                    <form id="db-form" onsubmit="handleSubmit(event)" class="space-y-6 bg-white p-6 rounded-[30px] border border-gray-100 shadow-sm">
                        <div>
                            <label class="block text-sm font-bold text-[#4E5968] mb-2 ml-1">${L.nameLabel}</label>
                            <input type="text" name="name" class="input-field" placeholder="${L.namePlaceholder}" required>
                        </div>
                        <div>
                            <label class="block text-sm font-bold text-[#4E5968] mb-2 ml-1">${L.phoneLabel}</label>
                            <input type="tel" name="phone" class="input-field" placeholder="${L.phonePlaceholder}" required>
                        </div>
                        <div class="flex items-center space-x-3 py-2 px-1">
                            <input type="checkbox" id="agree" class="w-5 h-5 rounded-md border-gray-300 text-[#0050FF] focus:ring-[#0050FF]" required>
                            <label for="agree" class="text-[13px] font-medium text-[#6B7684] cursor-pointer leading-tight">${L.agree}</label>
                        </div>
                        <button type="submit" class="btn-submit mt-4">${L.submit}</button>
                    </form>

                    <footer class="mt-20 pt-10 border-t border-gray-100 text-[11px] text-[#ADB5BD] leading-6 pb-10">
                        <p class="font-black text-[#8B95A1] mb-2">${t.footer.company}</p>
                        <p>${t.footer.brn}</p>
                        <p>${t.footer.ceo}</p>
                        <p>${t.footer.addr}</p>
                        <p>${t.footer.email}</p>
                        <p class="mt-8 opacity-60 whitespace-pre-line text-center font-medium">${t.footer.rights}</p>
                    </footer>
                </div>
            `;
            
            lucide.createIcons();
        }

        window.onload = () => {
            // 초기 실행 시 러시아어로 렌더링하도록 변경
            switchLang('ru');
        };
    </script>
</body>
</html>